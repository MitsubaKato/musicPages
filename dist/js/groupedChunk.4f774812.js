(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["groupedChunk"],{"00b4":function(e,t,n){"use strict";n("ac1f");var r=n("23e7"),i=n("da84"),s=n("c65b"),a=n("e330"),o=n("1626"),l=n("861d"),c=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),u=i.Error,d=a(/./.test);r({target:"RegExp",proto:!0,forced:!c},{test:function(e){var t=this.exec;if(!o(t))return d(this,e);var n=s(t,this,e);if(null!==n&&!l(n))throw new u("RegExp exec method returned something other than an Object or null");return!!n}})},"04d1":function(e,t,n){var r=n("342f"),i=r.match(/firefox\/(\d+)/i);e.exports=!!i&&+i[1]},"0d03":function(e,t,n){var r=n("e330"),i=n("6eeb"),s=Date.prototype,a="Invalid Date",o="toString",l=r(s[o]),c=r(s.getTime);String(new Date(NaN))!=a&&i(s,o,(function(){var e=c(this);return e===e?l(this):a}))},"25f0":function(e,t,n){"use strict";var r=n("e330"),i=n("5e77").PROPER,s=n("6eeb"),a=n("825a"),o=n("3a9b"),l=n("577e"),c=n("d039"),u=n("ad6d"),d="toString",b=RegExp.prototype,p=b[d],h=r(u),f=c((function(){return"/a/b"!=p.call({source:"a",flags:"b"})})),m=i&&p.name!=d;(f||m)&&s(RegExp.prototype,d,(function(){var e=a(this),t=l(e.source),n=e.flags,r=l(void 0===n&&o(b,e)&&!("flags"in b)?h(e):n);return"/"+t+"/"+r}),{unsafe:!0})},"277d":function(e,t,n){var r=n("23e7"),i=n("e8b5");r({target:"Array",stat:!0},{isArray:i})},"408a":function(e,t,n){var r=n("e330");e.exports=r(1..valueOf)},"4df4":function(e,t,n){"use strict";var r=n("da84"),i=n("0366"),s=n("c65b"),a=n("7b0b"),o=n("9bdd"),l=n("e95a"),c=n("68ee"),u=n("07fa"),d=n("8418"),b=n("9a1f"),p=n("35a1"),h=r.Array;e.exports=function(e){var t=a(e),n=c(this),r=arguments.length,f=r>1?arguments[1]:void 0,m=void 0!==f;m&&(f=i(f,r>2?arguments[2]:void 0));var g,v,O,j,y,x,w=p(t),_=0;if(!w||this==h&&l(w))for(g=u(t),v=n?new this(g):h(g);g>_;_++)x=m?f(t[_],_):t[_],d(v,_,x);else for(j=b(t,w),y=j.next,v=n?new this:[];!(O=s(y,j)).done;_++)x=m?o(j,f,[O.value,_],!0):O.value,d(v,_,x);return v.length=_,v}},"4e82":function(e,t,n){"use strict";var r=n("23e7"),i=n("e330"),s=n("59ed"),a=n("7b0b"),o=n("07fa"),l=n("577e"),c=n("d039"),u=n("addb"),d=n("a640"),b=n("04d1"),p=n("d998"),h=n("2d00"),f=n("512c"),m=[],g=i(m.sort),v=i(m.push),O=c((function(){m.sort(void 0)})),j=c((function(){m.sort(null)})),y=d("sort"),x=!c((function(){if(h)return h<70;if(!(b&&b>3)){if(p)return!0;if(f)return f<603;var e,t,n,r,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)m.push({k:t+r,v:n})}for(m.sort((function(e,t){return t.v-e.v})),r=0;r<m.length;r++)t=m[r].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}})),w=O||!j||!y||!x,_=function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:l(t)>l(n)?1:-1}};r({target:"Array",proto:!0,forced:w},{sort:function(e){void 0!==e&&s(e);var t=a(this);if(x)return void 0===e?g(t):g(t,e);var n,r,i=[],l=o(t);for(r=0;r<l;r++)r in t&&v(i,t[r]);u(i,_(e)),n=i.length,r=0;while(r<n)t[r]=i[r++];while(r<l)delete t[r++];return t}})},"512c":function(e,t,n){var r=n("342f"),i=r.match(/AppleWebKit\/(\d+)\./);e.exports=!!i&&+i[1]},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var r=n("e330"),i=n("1d80"),s=n("577e"),a=n("5899"),o=r("".replace),l="["+a+"]",c=RegExp("^"+l+l+"*"),u=RegExp(l+l+"*$"),d=function(e){return function(t){var n=s(i(t));return 1&e&&(n=o(n,c,"")),2&e&&(n=o(n,u,"")),n}};e.exports={start:d(1),end:d(2),trim:d(3)}},8516:function(e,t,n){},"8dc3":function(e,t,n){"use strict";n.r(t);n("4e82"),n("b0c0");var r=n("7a23"),i={class:"w-full mb-8 py-14 text-center text-white relative"},s=Object(r["i"])("div",{class:"absolute inset-0 w-full h-full box-border bg-contain music-bg",style:{"background-image":"url(/assets/img/song-header.png)"}},null,-1),a={class:"container mx-auto flex items-center"},o={class:"z-50 text-left ml-8"},l=["src"],c={class:"text-3xl font-bold"},u={class:"pt-2 block"},d={class:"container mx-auto mt-6",id:"comments"},b={class:"bg-white rounded border border-gray-200 relative flex flex-col"},p={class:"px-6 pt-6 pb-5 font-bold border-b border-gray-200"},h={class:"card-title"},f=Object(r["i"])("i",{class:"fa fa-comments float-right text-green-400 text-2xl"},null,-1),m={class:""},g={class:"flex items-center shadow-lg mx-8 mb-4"},v={class:"w-full bg-white rounded-lg px-4 pt-2"},O={class:"flex flex-wrap -mx-3 mb-6"},j={class:"px-4 pt-3 pb-2 text-gray-800 text-lg"},y={class:"w-full md:w-full px-3 mb-2 mt-2"},x={class:"ml-3 mt-1"},w=["disabled"],_={value:"1"},k={value:"2"},S={class:"container mx-auto"},$={class:"relative grid grid-cols-1 gap-4 p-4 mb-8 border rounded-lg bg-white shadow-lg"},V={class:"relative flex gap-4"},A=["src"],L={class:"flex flex-col w-full"},M={class:"flex flex-row justify-between"},R={class:"relative text-xl whitespace-nowrap truncate overflow-hidden"},E={class:"text-gray-400 text-sm"},I={class:"-mt-4 text-gray-500 break-words"};function D(e,t,n,D,T,C){var F=Object(r["J"])("vee-field"),P=Object(r["J"])("ErrorMessage"),U=Object(r["J"])("vee-form"),N=Object(r["J"])("app-player");return Object(r["A"])(),Object(r["h"])("div",null,[Object(r["i"])("main",null,[Object(r["i"])("section",i,[s,Object(r["i"])("div",a,[Object(r["i"])("button",{type:"button",class:"z-50 h-24 w-24 text-3xl bg-white text-black rounded-full focus:outline-none",onClick:t[0]||(t[0]=Object(r["Y"])((function(t){return e.newSong(T.song)}),["prevent"]))},[Object(r["i"])("i",{class:Object(r["t"])(["fa text-gray-500 text-xl -mr-1",{"fa-play":!e.playing,"fa-pause":e.playing}])},null,2)]),Object(r["i"])("div",o,[Object(r["i"])("img",{src:T.song.cover,alt:"Song Cover",class:"h-24 w-24 object-cover rounded-full mr-4"},null,8,l),Object(r["i"])("div",c,Object(r["M"])(T.song.modified_name),1),Object(r["i"])("div",u,[(Object(r["A"])(!0),Object(r["h"])(r["a"],null,Object(r["H"])(T.song.genre,(function(e){return Object(r["A"])(),Object(r["h"])("span",{key:e,class:"mr-2 inline-block rounded-full bg-bgGenre px-3 py-1 text-sm font-semibold text-white"},Object(r["M"])(e),1)})),128))])])])]),Object(r["i"])("section",d,[Object(r["i"])("div",b,[Object(r["i"])("div",p,[Object(r["i"])("span",h,Object(r["M"])(e.$tc("song.comment_count",T.song.comment_count,{count:T.song.comment_count})),1),f]),Object(r["i"])("div",m,[T.comment_show_alert?(Object(r["A"])(),Object(r["h"])("div",{key:0,class:Object(r["t"])(["text-white text-center font-bold p-4 mb-4",T.comment_alert_variant])},Object(r["M"])(T.comment_alert_message),3)):Object(r["g"])("",!0),e.userLoggedIn?(Object(r["A"])(),Object(r["f"])(U,{key:1,"validation-schema":T.schema,onSubmit:C.addComment,"validate-on":"submit"},{default:Object(r["V"])((function(){return[Object(r["i"])("div",g,[Object(r["i"])("div",v,[Object(r["i"])("div",O,[Object(r["i"])("h2",j,Object(r["M"])(e.$t("fieldNames.addComment")),1),Object(r["i"])("div",y,[Object(r["k"])(F,{as:"textarea",name:"comment",class:"bg-gray-100 rounded border border-gray-400 leading-normal resize-none w-full h-20 py-2 px-3 font-medium placeholder-gray-700 focus:outline-none focus:bg-white",placeholder:e.$t("placeholder.text"),onInput:C.resetError},null,8,["placeholder","onInput"])]),Object(r["i"])("div",x,[T.formHasBeenSubmitted?(Object(r["A"])(),Object(r["f"])(P,{key:0,class:"text-red-600 block mb-3",name:"comment"})):Object(r["g"])("",!0),Object(r["i"])("button",{type:"submit",class:"bg-white text-gray-700 font-medium py-1 px-4 border border-gray-400 rounded-lg tracking-wide mr-1 hover:bg-gray-100",disabled:T.comment_in_submission},Object(r["M"])(e.$t("fieldNames.submit")),9,w)])])])])]})),_:1},8,["validation-schema","onSubmit"])):Object(r["g"])("",!0),Object(r["W"])(Object(r["i"])("select",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return T.sort=e}),class:"bg-white text-gray-700 font-medium py-1 px-4 border border-gray-400 rounded-lg tracking-wide mr-1 hover:bg-gray-100 my-8 ml-8"},[Object(r["i"])("option",_,Object(r["M"])(e.$t("fieldNames.latest")),1),Object(r["i"])("option",k,Object(r["M"])(e.$t("fieldNames.older")),1)],512),[[r["P"],T.sort]])])])]),Object(r["i"])("ul",S,[(Object(r["A"])(!0),Object(r["h"])(r["a"],null,Object(r["H"])(C.sortedComments,(function(e){return Object(r["A"])(),Object(r["h"])("li",{class:"p-6 bg-gray-50",key:e.docID},[Object(r["i"])("div",$,[Object(r["i"])("div",V,[Object(r["i"])("img",{src:e.avatar,class:"relative rounded-lg -top-8 -mb-4 bg-white border h-20 w-20",alt:"Comment avatar"},null,8,A),Object(r["i"])("div",L,[Object(r["i"])("div",M,[Object(r["i"])("p",R,Object(r["M"])(e.name),1)]),Object(r["i"])("p",E,Object(r["M"])(e.datePosted),1)])]),Object(r["i"])("p",I,Object(r["M"])(e.content),1)])])})),128))])]),Object(r["k"])(N,{songe:T.song},null,8,["songe"])])}var T=n("1da1"),C=n("5530"),F=(n("96cf"),n("fb6a"),n("0d03"),n("4795"),n("d401"),n("d3b7"),n("25f0"),n("d81d"),n("3ca3"),n("ddb0"),n("b79f")),P=n("5502"),U={class:"fixed justify-center bottom-0 left-0 bg-white p-5 pb-4 text-left align-top w-full h-15 flex items-center"},N={class:"flex-shrink-0"},B={class:"w-14 h-7 leading-3 text-gray-400 text-lg flex items-center pl-5"},Y={class:"player-currenttime"},H=Object(r["i"])("i",{class:"fas fa-circle"},null,-1),G=[H],K={class:"w-14 h-7 leading-1 text-gray-400 text-lg flex items-center"},J={class:"player-duration"},q={class:"w-16 h-7 leading-3 flex items-center mr-5"},X={class:"w-14 h-14 mr-3"},W=["src"],z={class:"text-lg"},Q={class:"song-title"},Z=Object(r["i"])("br",null,null,-1),ee={class:"song-artist"};function te(e,t,n,i,s,a){return Object(r["A"])(),Object(r["h"])("div",U,[Object(r["i"])("div",N,[Object(r["i"])("button",{type:"button",onClick:t[0]||(t[0]=Object(r["Y"])((function(){return e.toggleAudio&&e.toggleAudio.apply(e,arguments)}),["prevent"]))},[Object(r["i"])("i",{class:Object(r["t"])(["fa text-3xl no-outline",{"faк fa-play":!e.playing,"faк fa-pause":e.playing}])},null,2)])]),Object(r["i"])("div",B,[Object(r["i"])("span",Y,Object(r["M"])(e.seek),1)]),Object(r["i"])("div",{class:"flex-grow mx-3 h-2 bg-gray-300 relative cursor-pointer",onClick:t[1]||(t[1]=Object(r["Y"])((function(){return e.updateSeek&&e.updateSeek.apply(e,arguments)}),["prevent"]))},[Object(r["i"])("span",{class:"absolute -top-2 text-gray-800 text-xl",style:Object(r["u"])({left:e.playerProgress})},G,4),Object(r["i"])("span",{class:"block h-2 rounded bg-gradient-to-r from-green-500 to-green-300",style:Object(r["u"])({width:e.playerProgress})},null,4)]),Object(r["i"])("div",K,[Object(r["i"])("span",J,Object(r["M"])(e.duration),1)]),Object(r["i"])("div",q,[Object(r["W"])(Object(r["i"])("input",{type:"range",min:"0",max:"1",step:"0.01","onUpdate:modelValue":t[2]||(t[2]=function(e){return s.localVolume=e}),onInput:t[3]||(t[3]=function(){return a.updateVolume&&a.updateVolume.apply(a,arguments)}),class:"slider w-full"},null,544),[[r["Q"],s.localVolume]])]),Object(r["i"])("div",X,[Object(r["i"])("img",{src:n.songe.cover,alt:"Cover art",class:"w-full h-full object-cover rounded"},null,8,W)]),Object(r["i"])("div",z,[Object(r["i"])("span",Q,Object(r["M"])(n.songe.modified_name),1),Z,Object(r["i"])("span",ee," ("+Object(r["M"])(e.$t("fieldNames.uploadedBy"))+" "+Object(r["M"])(n.songe.display_name)+") ",1)])])}var ne={name:"Player",props:["songe"],data:function(){return{showVolumeSlider:!1,localVolume:0}},computed:Object(C["a"])(Object(C["a"])({},Object(P["c"])(["playing"])),Object(P["e"])({seek:function(e){return e.player.seek},duration:function(e){return e.player.duration},playerProgress:function(e){return e.player.playerProgress},currentSong:function(e){return e.player.currentSong},volume:function(e){return e.player.volume},song:{get:function(){return this.currentSong||this.$props.songe},set:function(e){this.currentSong=e}}})),watch:{volume:function(e){this.localVolume=e}},methods:Object(C["a"])(Object(C["a"])({},Object(P["b"])(["toggleAudio","updateSeek","stopAudio","resetSong","resetProgress"])),{},{updateVolume:function(){this.$store.commit("updateVolume",this.localVolume)}}),mounted:function(){this.localVolume=this.volume},beforeRouteLeave:function(e,t,n){this.stopAudio(),this.resetSong(),this.resetProgress(),n()}},re=n("6b0d"),ie=n.n(re);const se=ie()(ne,[["render",te]]);var ae=se,oe={name:"Song",components:{AppPlayer:ae},data:function(){return{song:{},songPlaying:!1,schema:{comment:"required|min:3"},comment_alert_timeout:null,formHasBeenSubmitted:!1,comment_in_submission:!1,comment_show_alert:!1,comment_alert_variant:"bg-blue-500",comment_alert_message:this.$t("comment.submitted"),comments:[],sort:"1"}},beforeRouteLeave:function(e,t,n){this.stopAudio(),n()},computed:Object(C["a"])(Object(C["a"])(Object(C["a"])({},Object(P["e"])({userLoggedIn:function(e){return e.auth.userLoggedIn}})),Object(P["c"])(["playing"])),{},{sortedComments:function(){var e=this;return this.comments.slice().sort((function(t,n){return"1"===e.sort?new Date(n.datePosted)-new Date(t.datePosted):new Date(t.datePosted)-new Date(n.datePosted)}))}}),beforeRouteEnter:function(e,t,n){return Object(T["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,F["e"].doc(e.params.id).get();case 2:r=t.sent,n((function(e){if(r.exists){var t=e.$route.query.sort;e.sort="1"===t||"2"===t?t:"1",e.song=r.data(),e.getComments()}else e.$router.push({name:"home"})}));case 4:case"end":return t.stop()}}),t)})))()},methods:Object(C["a"])(Object(C["a"])({resetError:function(){this.comment_show_alert=!1}},Object(P["b"])(["newSong","stopAudio"])),{},{addComment:function(e,t){var n=this;return Object(T["a"])(regeneratorRuntime.mark((function r(){var i,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i=t.resetForm,n.comment_in_submission=!0,n.comment_show_alert=!0,n.formHasBeenSubmitted=!0,console.log("addComment function is called"),n.comment_alert_timeout=setTimeout((function(){n.comment_show_alert=!1}),3e3),n.comment_alert_variant="bg-blue-500",n.comment_alert_message=n.$t("comment.submitted"),s={content:e.comment,datePosted:(new Date).toString(),sid:n.$route.params.id,name:F["a"].currentUser.displayName,uid:F["a"].currentUser.uid,avatar:F["a"].currentUser.photoURL},r.next=11,F["b"].add(s);case 11:return n.song.comment_count+=1,r.next=14,F["e"].doc(n.$route.params.id).update({comment_count:n.song.comment_count});case 14:n.getComments(),n.comment_in_submission=!1,n.comment_alert_variant="bg-green-500",n.comment_alert_message=n.$t("comment.added"),i(),n.formHasBeenSubmitted=!1,n.comment_alert_timeout=setTimeout((function(){n.comment_show_alert=!1}),3e3);case 21:case"end":return r.stop()}}),r)})))()},getComments:function(){var e=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,F["b"].where("sid","==",e.$route.params.id).get();case 2:return n=t.sent,r=n.docs.map(function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.data(),e.next=3,F["g"].doc(n.uid).get();case 3:return r=e.sent,i=r.data(),e.abrupt("return",Object(C["a"])(Object(C["a"])({docID:t.id},n),{},{avatar:i.photoURL}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.next=6,Promise.all(r);case 6:e.comments=t.sent;case 7:case"end":return t.stop()}}),t)})))()}}),watch:{sort:function(e){e!==this.$route.query.sort&&this.$router.push({query:{sort:e}})}},beforeUnmount:function(){clearTimeout(this.comment_alert_timeout)}};const le=ie()(oe,[["render",D]]);t["default"]=le},"9bdd":function(e,t,n){var r=n("825a"),i=n("2a62");e.exports=function(e,t,n,s){try{return s?t(r(n)[0],n[1]):t(n)}catch(a){i(e,"throw",a)}}},a434:function(e,t,n){"use strict";var r=n("23e7"),i=n("da84"),s=n("23cb"),a=n("5926"),o=n("07fa"),l=n("7b0b"),c=n("65f0"),u=n("8418"),d=n("1dde"),b=d("splice"),p=i.TypeError,h=Math.max,f=Math.min,m=9007199254740991,g="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!b},{splice:function(e,t){var n,r,i,d,b,v,O=l(this),j=o(O),y=s(e,j),x=arguments.length;if(0===x?n=r=0:1===x?(n=0,r=j-y):(n=x-2,r=f(h(a(t),0),j-y)),j+n-r>m)throw p(g);for(i=c(O,r),d=0;d<r;d++)b=y+d,b in O&&u(i,d,O[b]);if(i.length=r,n<r){for(d=y;d<j-r;d++)b=d+r,v=d+n,b in O?O[v]=O[b]:delete O[v];for(d=j;d>j-r+n;d--)delete O[d-1]}else if(n>r)for(d=j-r;d>y;d--)b=d+r-1,v=d+n-1,b in O?O[v]=O[b]:delete O[v];for(d=0;d<n;d++)O[d+y]=arguments[d+2];return O.length=j-r+n,i}})},a630:function(e,t,n){var r=n("23e7"),i=n("4df4"),s=n("1c7e"),a=!s((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:a},{from:i})},a8ab:function(e,t,n){"use strict";n("b964")},a9e3:function(e,t,n){"use strict";var r=n("83ab"),i=n("da84"),s=n("e330"),a=n("94ca"),o=n("6eeb"),l=n("1a2d"),c=n("7156"),u=n("3a9b"),d=n("d9b5"),b=n("c04e"),p=n("d039"),h=n("241c").f,f=n("06cf").f,m=n("9bf2").f,g=n("408a"),v=n("58a8").trim,O="Number",j=i[O],y=j.prototype,x=i.TypeError,w=s("".slice),_=s("".charCodeAt),k=function(e){var t=b(e,"number");return"bigint"==typeof t?t:S(t)},S=function(e){var t,n,r,i,s,a,o,l,c=b(e,"number");if(d(c))throw x("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=v(c),t=_(c,0),43===t||45===t){if(n=_(c,2),88===n||120===n)return NaN}else if(48===t){switch(_(c,1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+c}for(s=w(c,2),a=s.length,o=0;o<a;o++)if(l=_(s,o),l<48||l>i)return NaN;return parseInt(s,r)}return+c};if(a(O,!j(" 0o1")||!j("0b1")||j("+0x1"))){for(var $,V=function(e){var t=arguments.length<1?0:j(k(e)),n=this;return u(y,n)&&p((function(){g(n)}))?c(Object(t),n,V):t},A=r?h(j):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),L=0;A.length>L;L++)l(j,$=A[L])&&!l(V,$)&&m(V,$,f(j,$));V.prototype=y,y.constructor=V,o(i,O,V)}},addb:function(e,t,n){var r=n("4dae"),i=Math.floor,s=function(e,t){var n=e.length,l=i(n/2);return n<8?a(e,t):o(e,s(r(e,0,l),t),s(r(e,l),t),t)},a=function(e,t){var n,r,i=e.length,s=1;while(s<i){r=s,n=e[s];while(r&&t(e[r-1],n)>0)e[r]=e[--r];r!==s++&&(e[r]=n)}return e},o=function(e,t,n,r){var i=t.length,s=n.length,a=0,o=0;while(a<i||o<s)e[a+o]=a<i&&o<s?r(t[a],n[o])<=0?t[a++]:n[o++]:a<i?t[a++]:n[o++];return e};e.exports=s},b964:function(e,t,n){},c975:function(e,t,n){"use strict";var r=n("23e7"),i=n("e330"),s=n("4d64").indexOf,a=n("a640"),o=i([].indexOf),l=!!o&&1/o([1],1,-0)<0,c=a("indexOf");r({target:"Array",proto:!0,forced:l||!c},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return l?o(this,e,t)||0:s(this,e,t)}})},d28b:function(e,t,n){var r=n("746f");r("iterator")},d76c:function(e,t,n){"use strict";n("8516")},d81d:function(e,t,n){"use strict";var r=n("23e7"),i=n("b727").map,s=n("1dde"),a=s("map");r({target:"Array",proto:!0,forced:!a},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},d998:function(e,t,n){var r=n("342f");e.exports=/MSIE|Trident/.test(r)},e01a:function(e,t,n){"use strict";var r=n("23e7"),i=n("83ab"),s=n("da84"),a=n("e330"),o=n("1a2d"),l=n("1626"),c=n("3a9b"),u=n("577e"),d=n("9bf2").f,b=n("e893"),p=s.Symbol,h=p&&p.prototype;if(i&&l(p)&&(!("description"in h)||void 0!==p().description)){var f={},m=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:u(arguments[0]),t=c(h,this)?new p(e):void 0===e?p():p(e);return""===e&&(f[t]=!0),t};b(m,p),m.prototype=h,h.constructor=m;var g="Symbol(test)"==String(p("test")),v=a(h.toString),O=a(h.valueOf),j=/^Symbol\((.*)\)[^)]+$/,y=a("".replace),x=a("".slice);d(h,"description",{configurable:!0,get:function(){var e=O(this),t=v(e);if(o(f,e))return"";var n=g?x(t,7,-1):y(t,j,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:m})}},f74b:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),i={class:"container mx-auto mt-6"},s={class:"md:grid md:grid-cols-3 md:gap-4"},a={class:"col-span-1"},o={class:"col-span-2"},l={class:"bg-white rounded border border-gray-200 relative flex flex-col"},c={class:"px-6 pt-6 pb-5 font-bold border-b border-gray-200"},u={class:"card-title"},d=Object(r["i"])("i",{class:"fa fa-compact-disc float-right text-green-400 text-2xl"},null,-1),b={class:"p-6"};function p(e,t,n,p,h,f){var m=Object(r["J"])("app-upload"),g=Object(r["J"])("composition-item");return Object(r["A"])(),Object(r["h"])("section",i,[Object(r["i"])("div",s,[Object(r["i"])("div",a,[Object(r["k"])(m,{ref:"upload",addSong:f.addSong},null,8,["addSong"])]),Object(r["i"])("div",o,[Object(r["i"])("div",l,[Object(r["i"])("div",c,[Object(r["i"])("span",u,Object(r["M"])(e.$t("manage.my_songs"))+", "+Object(r["M"])(h.NameUser),1),d]),Object(r["i"])("div",b,[(Object(r["A"])(!0),Object(r["h"])(r["a"],null,Object(r["H"])(h.songs,(function(e,t){return Object(r["A"])(),Object(r["f"])(g,{key:e.docID,song:e,updateSong:f.updateSong,index:t,removeSong:f.removeSong,updateUnsavedFlag:f.updateUnsavedFlag},null,8,["song","updateSong","index","removeSong","updateUnsavedFlag"])})),128))])])])])])}var h=n("5530"),f=n("1da1"),m=(n("96cf"),n("4160"),n("d3b7"),n("159b"),n("d81d"),n("3ca3"),n("ddb0"),n("a434"),n("b0c0"),{class:"text-xl font-bold mb-4"}),g={class:"bg-white rounded border border-gray-200 relative flex flex-col"},v={class:"px-6 pt-6 pb-5 font-bold border-b border-gray-200"},O={class:"card-title"},j=Object(r["i"])("i",{class:"fas fa-upload float-right text-green-400 text-2xl"},null,-1),y={class:"p-6"},x={class:"bg-white cursor-pointer text-gray-700 font-medium py-1 px-4 border border-gray-400 rounded-lg tracking-wide mr-1 hover:bg-gray-100 mt-4 inline-block"},w=Object(r["i"])("hr",{class:"my-6"},null,-1),_=["onClick"],k=Object(r["i"])("i",{class:"fas fa-times"},null,-1),S=[k],$={class:"flex h-4 overflow-hidden bg-gray-200 rounded"};function V(e,t,n,i,s,a){return Object(r["A"])(),Object(r["h"])(r["a"],null,[s.showErrorModal?(Object(r["A"])(),Object(r["h"])("div",{key:0,class:"fixed inset-0 flex items-center justify-center z-50",onClick:t[2]||(t[2]=function(e){return s.showErrorModal=!1})},[Object(r["i"])("div",{class:"bg-white rounded p-8",onClick:t[1]||(t[1]=Object(r["Y"])((function(){}),["stop"]))},[Object(r["i"])("h2",m,Object(r["M"])(e.$t("manage.error")),1),Object(r["i"])("p",null,Object(r["M"])(s.errorMessage),1),Object(r["i"])("button",{class:"mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",onClick:t[0]||(t[0]=function(e){return s.showErrorModal=!1})},Object(r["M"])(e.$t("manage.close")),1)])])):Object(r["g"])("",!0),Object(r["i"])("div",g,[Object(r["i"])("div",v,[Object(r["i"])("span",O,Object(r["M"])(e.$t("manage.upload")),1),j]),Object(r["i"])("div",y,[Object(r["i"])("div",{class:Object(r["t"])(["w-full px-10 py-20 rounded text-center cursor-pointer border border-dashed border-gray-400 text-gray-400 transition duration-500 hover:text-white hover:bg-green-400 hover:border-green-400 hover:border-solid",{"bg-green-400 border-green-400 border-solid":s.is_dragover}]),onDrag:t[3]||(t[3]=Object(r["Y"])((function(){}),["prevent","stop"])),onDragstart:t[4]||(t[4]=Object(r["Y"])((function(){}),["prevent","stop"])),onDragend:t[5]||(t[5]=Object(r["Y"])((function(e){return s.is_dragover=!1}),["prevent","stop"])),onDragover:t[6]||(t[6]=Object(r["Y"])((function(e){return s.is_dragover=!0}),["prevent","stop"])),onDragenter:t[7]||(t[7]=Object(r["Y"])((function(e){return s.is_dragover=!0}),["prevent","stop"])),onDragleave:t[8]||(t[8]=Object(r["Y"])((function(e){return s.is_dragover=!1}),["prevent","stop"])),onDrop:t[9]||(t[9]=Object(r["Y"])((function(e){return a.upload(e)}),["prevent","stop"]))},[Object(r["i"])("h5",null,Object(r["M"])(e.$t("files.drop")),1)],34),Object(r["i"])("label",x,[Object(r["j"])(Object(r["M"])(e.$t("labels.upload"))+" ",1),Object(r["i"])("input",{type:"file",accept:"audio/mpeg",multiple:"",onChange:t[10]||(t[10]=function(e){return a.upload(e)}),style:{display:"none"}},null,32)]),w,(Object(r["A"])(!0),Object(r["h"])(r["a"],null,Object(r["H"])(s.uploads,(function(e){return Object(r["A"])(),Object(r["h"])("div",{class:"mb-4",key:e.name},[Object(r["i"])("div",{class:Object(r["t"])(["font-bold text-sm flex justify-between items-center",e.text_class])},[Object(r["i"])("span",null,[Object(r["i"])("i",{class:Object(r["t"])(e.icon)},null,2),Object(r["j"])(" "+Object(r["M"])(e.name),1)]),"bg-yellow-400"===e.variant?(Object(r["A"])(),Object(r["h"])("button",{key:0,class:"text-red-600",onClick:function(t){return a.removeUpload(e)}},S,8,_)):Object(r["g"])("",!0)],2),Object(r["i"])("div",$,[Object(r["i"])("div",{class:Object(r["t"])(["transition-all progress-bar",e.variant]),style:Object(r["u"])({width:e.current_progress+"%"})},null,6)])])})),128))])])],64)}n("a4d3"),n("e01a"),n("d28b"),n("277d"),n("d9e2"),n("d401"),n("fb6a"),n("a630"),n("ac1f"),n("00b4");function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function L(e,t){if(e){if("string"===typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}function M(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=L(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(o)throw s}}}}function R(e){if(Array.isArray(e))return A(e)}function E(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function I(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function D(e){return R(e)||E(e)||L(e)||I()}n("c975"),n("0d03");var T=n("b79f"),C=n("260b"),F={name:"Upload",data:function(){return{is_dragover:!1,uploads:[],showErrorModal:!1,errorMessage:""}},props:["addSong"],methods:{removeUpload:function(e){e.task&&e.task.cancel&&e.task.cancel();var t=this.uploads.indexOf(e);-1!==t&&this.uploads.splice(t,1)},uploadFile:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var r,i,s,a,o,l,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("audio/mpeg"===e.type){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,t.fileAlreadyUploaded(e);case 4:if(!n.sent){n.next=9;break}return t.errorMessage=t.$t("manage.fileExist"),t.showErrorModal=!0,t.uploads.push({task:{},current_progress:100,name:e.name,variant:"bg-yellow-400",icon:"fas fa-exclamation",text_class:"text-yellow-400"}),n.abrupt("return");case 9:return r=T["f"].ref(),i=r.child("songs/".concat(e.name)),s=i.put(e),a=t.uploads.push({task:s,current_progress:0,name:e.name,variant:"bg-blue-400",icon:"fas fa-spinner fa-spin",text_class:""})-1,n.prev=13,n.next=16,new Promise((function(e,n){s.on("state_changed",(function(e){var n=e.bytesTransferred/e.totalBytes*100;t.uploads[a].current_progress=n}),n,e)}));case 16:return o={uid:T["a"].currentUser.uid,display_name:T["a"].currentUser.displayName,original_name:s.snapshot.ref.name,modified_name:s.snapshot.ref.name,genre:"",comment_count:0,uploadTimestamp:C["a"].firestore.Timestamp.fromDate(new Date)},n.next=19,s.snapshot.ref.getDownloadURL();case 19:return o.url=n.sent,n.next=22,T["e"].add(o);case 22:return l=n.sent,n.next=25,l.get();case 25:c=n.sent,t.addSong(c),t.uploads[a].variant="bg-green-400",t.uploads[a].icon="fas fa-check",t.uploads[a].text_class="text-green-400",n.next=37;break;case 32:n.prev=32,n.t0=n["catch"](13),t.uploads[a].variant="bg-red-400",t.uploads[a].icon="fas fa-times",t.uploads[a].text_class="text-red-400";case 37:case"end":return n.stop()}}),n,null,[[13,32]])})))()},upload:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var r,i,s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.is_dragover=!1,r=e.dataTransfer?D(e.dataTransfer.files):D(e.target.files),i=M(r),n.prev=3,i.s();case 5:if((s=i.n()).done){n.next=11;break}return a=s.value,n.next=9,t.uploadFile(a);case 9:n.next=5;break;case 11:n.next=16;break;case 13:n.prev=13,n.t0=n["catch"](3),i.e(n.t0);case 16:return n.prev=16,i.f(),n.finish(16);case 19:e.target.value=null;case 20:case"end":return n.stop()}}),n,null,[[3,13,16,19]])})))()},cancelUploads:function(){this.uploads.forEach((function(e){e.task.cancel()}))},fileAlreadyUploaded:function(e){return Object(f["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,T["e"].where("uid","==",T["a"].currentUser.uid).where("original_name","==",e.name).get();case 2:return n=t.sent,t.abrupt("return",!n.empty);case 4:case"end":return t.stop()}}),t)})))()}},beforeUnmount:function(){this.uploads.forEach((function(e){e.task.cancel()}))}},P=(n("a8ab"),n("6b0d")),U=n.n(P);const N=U()(F,[["render",V]]);var B=N,Y={class:"border border-gray-200 p-3 mb-4 rounded"},H={class:"inline-block text-2xl font-bold"},G=Object(r["i"])("i",{class:"fa fa-times"},null,-1),K=[G],J=Object(r["i"])("i",{class:"fa fa-pencil-alt"},null,-1),q=[J],X={class:"mb-3"},W={class:"inline-block mb-2"},z={class:"mb-3"},Q={class:"inline-block mb-2"},Z={class:"mb-5"},ee={class:"block mb-3"},te={class:"bg-white cursor-pointer text-gray-700 font-medium py-1 px-4 border border-gray-400 rounded-lg tracking-wide mr-1 hover:bg-gray-100"},ne=["src"],re={class:"justify-end flex"},ie=["disabled"],se=["disabled"];function ae(e,t,n,i,s,a){var o=Object(r["J"])("vee-field"),l=Object(r["J"])("ErrorMessage"),c=Object(r["J"])("VueMultiselect"),u=Object(r["J"])("vee-form");return Object(r["A"])(),Object(r["h"])("div",Y,[Object(r["W"])(Object(r["i"])("div",null,[Object(r["i"])("h4",H,Object(r["M"])(n.song.modified_name),1),Object(r["i"])("button",{class:"ml-1 py-1 px-2 text-sm rounded text-white bg-red-600 float-right",onClick:t[0]||(t[0]=Object(r["Y"])((function(){return a.deleteSong&&a.deleteSong.apply(a,arguments)}),["prevent"]))},K),Object(r["i"])("button",{class:"ml-1 py-1 px-2 text-sm rounded text-white bg-blue-600 float-right",onClick:t[1]||(t[1]=Object(r["Y"])((function(e){return s.showForm=!s.showForm}),["prevent"]))},q)],512),[[r["R"],!s.showForm]]),Object(r["W"])(Object(r["i"])("div",null,[s.show_alert?(Object(r["A"])(),Object(r["h"])("div",{key:0,class:Object(r["t"])(["text-white text-center font-bold p-4 mb-4",s.alert_variant])},Object(r["M"])(s.alert_message),3)):Object(r["g"])("",!0),Object(r["k"])(u,{"validation-schema":s.schema,"initial-values":n.song,onSubmit:a.edit},{default:Object(r["V"])((function(){return[Object(r["i"])("div",X,[Object(r["i"])("label",W,Object(r["M"])(e.$t("edit.title")),1),Object(r["k"])(o,{type:"text",name:"modified_name",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",onInput:t[2]||(t[2]=function(e){return n.updateUnsavedFlag(!0)})}),Object(r["k"])(l,{class:"text-red-600",name:"modified_name"})]),Object(r["i"])("div",z,[Object(r["i"])("label",Q,Object(r["M"])(e.$t("edit.genre")),1),Object(r["k"])(c,{modelValue:s.value,"onUpdate:modelValue":t[3]||(t[3]=function(e){return s.value=e}),options:s.tags,multiple:!0,"close-on-select":!0,taggable:!0,onTag:a.addTag,onSelect:a.onSelect,placeholder:e.$t("edit.pick"),label:"name","track-by":"name",onInput:t[4]||(t[4]=function(e){return n.updateUnsavedFlag(!0)})},null,8,["modelValue","options","onTag","onSelect","placeholder"]),Object(r["k"])(l,{class:"text-red-600",name:"genre"})]),Object(r["i"])("div",Z,[Object(r["i"])("label",ee,Object(r["M"])(e.$t("edit.cover")),1),Object(r["i"])("label",te,[Object(r["j"])(Object(r["M"])(e.$t("edit.coverSet"))+" ",1),Object(r["i"])("input",{style:{display:"none"},type:"file",accept:"image/*",onChange:t[5]||(t[5]=function(){return a.onCoverChange&&a.onCoverChange.apply(a,arguments)})},null,32)]),s.coverPreview?(Object(r["A"])(),Object(r["h"])("img",{key:0,src:s.coverPreview,class:"mt-3 w-32 object-cover"},null,8,ne)):Object(r["g"])("",!0)]),Object(r["i"])("div",re,[Object(r["i"])("button",{type:"submit",onClick:t[6]||(t[6]=function(){return a.saveTags&&a.saveTags.apply(a,arguments)}),class:"cursor-pointer text-gray-700 font-medium py-1 px-4 border border-gray-400 rounded-lg tracking-wide mr-1 hover:bg-green-100",disabled:s.in_submission},Object(r["M"])(e.$t("edit.submit")),9,ie),Object(r["i"])("button",{type:"button",class:"cursor-pointer text-gray-700 font-medium py-1 px-4 border border-gray-400 rounded-lg tracking-wide mr-1 hover:bg-gray-200 ml-4",disabled:s.in_submission,onClick:t[7]||(t[7]=Object(r["Y"])((function(e){return s.showForm=!1}),["prevent"]))},Object(r["M"])(e.$t("edit.back")),9,se)])]})),_:1},8,["validation-schema","initial-values","onSubmit"])],512),[[r["R"],s.showForm]])])}n("a9e3"),n("4de4"),n("4795");var oe=n("7bb1");function le(e){return 0!==e&&(!(!Array.isArray(e)||0!==e.length)||!e)}function ce(e){return(...t)=>!e(...t)}function ue(e,t){void 0===e&&(e="undefined"),null===e&&(e="null"),!1===e&&(e="false");const n=e.toString().toLowerCase();return-1!==n.indexOf(t.trim())}function de(e,t,n,r){return t?e.filter(e=>ue(r(e,n),t)).sort((e,t)=>r(e,n).length-r(t,n).length):e}function be(e){return e.filter(e=>!e.$isLabel)}function pe(e,t){return n=>n.reduce((n,r)=>r[e]&&r[e].length?(n.push({$groupLabel:r[t],$isLabel:!0}),n.concat(r[e])):n,[])}function he(e,t,n,r,i){return s=>s.map(s=>{if(!s[n])return console.warn("Options passed to vue-multiselect do not contain groups, despite the config."),[];const a=de(s[n],e,t,i);return a.length?{[r]:s[r],[n]:a}:[]})}const fe=(...e)=>t=>e.reduce((e,t)=>t(e),t);var me={data(){return{search:"",isOpen:!1,preferredOpenDirection:"below",optimizedHeight:this.maxHeight}},props:{internalSearch:{type:Boolean,default:!0},options:{type:Array,required:!0},multiple:{type:Boolean,default:!1},trackBy:{type:String},label:{type:String},searchable:{type:Boolean,default:!0},clearOnSelect:{type:Boolean,default:!0},hideSelected:{type:Boolean,default:!1},placeholder:{type:String,default:"Select option"},allowEmpty:{type:Boolean,default:!0},resetAfter:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!0},customLabel:{type:Function,default(e,t){return le(e)?"":t?e[t]:e}},taggable:{type:Boolean,default:!1},tagPlaceholder:{type:String,default:"Press enter to create a tag"},tagPosition:{type:String,default:"top"},max:{type:[Number,Boolean],default:!1},id:{default:null},optionsLimit:{type:Number,default:1e3},groupValues:{type:String},groupLabel:{type:String},groupSelect:{type:Boolean,default:!1},blockKeys:{type:Array,default(){return[]}},preserveSearch:{type:Boolean,default:!1},preselectFirst:{type:Boolean,default:!1},preventAutofocus:{type:Boolean,default:!1}},mounted(){!this.multiple&&this.max&&console.warn("[Vue-Multiselect warn]: Max prop should not be used when prop Multiple equals false."),this.preselectFirst&&!this.internalValue.length&&this.options.length&&this.select(this.filteredOptions[0])},computed:{internalValue(){return this.modelValue||0===this.modelValue?Array.isArray(this.modelValue)?this.modelValue:[this.modelValue]:[]},filteredOptions(){const e=this.search||"",t=e.toLowerCase().trim();let n=this.options.concat();return n=this.internalSearch?this.groupValues?this.filterAndFlat(n,t,this.label):de(n,t,this.label,this.customLabel):this.groupValues?pe(this.groupValues,this.groupLabel)(n):n,n=this.hideSelected?n.filter(ce(this.isSelected)):n,this.taggable&&t.length&&!this.isExistingOption(t)&&("bottom"===this.tagPosition?n.push({isTag:!0,label:e}):n.unshift({isTag:!0,label:e})),n.slice(0,this.optionsLimit)},valueKeys(){return this.trackBy?this.internalValue.map(e=>e[this.trackBy]):this.internalValue},optionKeys(){const e=this.groupValues?this.flatAndStrip(this.options):this.options;return e.map(e=>this.customLabel(e,this.label).toString().toLowerCase())},currentOptionLabel(){return this.multiple?this.searchable?"":this.placeholder:this.internalValue.length?this.getOptionLabel(this.internalValue[0]):this.searchable?"":this.placeholder}},watch:{internalValue:{handler(){this.resetAfter&&this.internalValue.length&&(this.search="",this.$emit("update:modelValue",this.multiple?[]:null))},deep:!0},search(){this.$emit("search-change",this.search)}},emits:["open","search-change","close","select","update:modelValue","remove","tag"],methods:{getValue(){return this.multiple?this.internalValue:0===this.internalValue.length?null:this.internalValue[0]},filterAndFlat(e,t,n){return fe(he(t,n,this.groupValues,this.groupLabel,this.customLabel),pe(this.groupValues,this.groupLabel))(e)},flatAndStrip(e){return fe(pe(this.groupValues,this.groupLabel),be)(e)},updateSearch(e){this.search=e},isExistingOption(e){return!!this.options&&this.optionKeys.indexOf(e)>-1},isSelected(e){const t=this.trackBy?e[this.trackBy]:e;return this.valueKeys.indexOf(t)>-1},isOptionDisabled(e){return!!e.$isDisabled},getOptionLabel(e){if(le(e))return"";if(e.isTag)return e.label;if(e.$isLabel)return e.$groupLabel;const t=this.customLabel(e,this.label);return le(t)?"":t},select(e,t){if(e.$isLabel&&this.groupSelect)this.selectGroup(e);else if(!(-1!==this.blockKeys.indexOf(t)||this.disabled||e.$isDisabled||e.$isLabel)&&(!this.max||!this.multiple||this.internalValue.length!==this.max)&&("Tab"!==t||this.pointerDirty)){if(e.isTag)this.$emit("tag",e.label,this.id),this.search="",this.closeOnSelect&&!this.multiple&&this.deactivate();else{const n=this.isSelected(e);if(n)return void("Tab"!==t&&this.removeElement(e));this.multiple?this.$emit("update:modelValue",this.internalValue.concat([e])):this.$emit("update:modelValue",e),this.$emit("select",e,this.id),this.clearOnSelect&&(this.search="")}this.closeOnSelect&&this.deactivate()}},selectGroup(e){const t=this.options.find(t=>t[this.groupLabel]===e.$groupLabel);if(t){if(this.wholeGroupSelected(t)){this.$emit("remove",t[this.groupValues],this.id);const e=this.internalValue.filter(e=>-1===t[this.groupValues].indexOf(e));this.$emit("update:modelValue",e)}else{let e=t[this.groupValues].filter(e=>!(this.isOptionDisabled(e)||this.isSelected(e)));this.max&&e.splice(this.max-this.internalValue.length),this.$emit("select",e,this.id),this.$emit("update:modelValue",this.internalValue.concat(e))}this.closeOnSelect&&this.deactivate()}},wholeGroupSelected(e){return e[this.groupValues].every(e=>this.isSelected(e)||this.isOptionDisabled(e))},wholeGroupDisabled(e){return e[this.groupValues].every(this.isOptionDisabled)},removeElement(e,t=!0){if(this.disabled)return;if(e.$isDisabled)return;if(!this.allowEmpty&&this.internalValue.length<=1)return void this.deactivate();const n="object"===typeof e?this.valueKeys.indexOf(e[this.trackBy]):this.valueKeys.indexOf(e);if(this.multiple){const e=this.internalValue.slice(0,n).concat(this.internalValue.slice(n+1));this.$emit("update:modelValue",e)}else this.$emit("update:modelValue",null);this.$emit("remove",e,this.id),this.closeOnSelect&&t&&this.deactivate()},removeLastElement(){-1===this.blockKeys.indexOf("Delete")&&0===this.search.length&&Array.isArray(this.internalValue)&&this.internalValue.length&&this.removeElement(this.internalValue[this.internalValue.length-1],!1)},activate(){this.isOpen||this.disabled||(this.adjustPosition(),this.groupValues&&0===this.pointer&&this.filteredOptions.length&&(this.pointer=1),this.isOpen=!0,this.searchable?(this.preserveSearch||(this.search=""),this.preventAutofocus||this.$nextTick(()=>this.$refs.search&&this.$refs.search.focus())):this.preventAutofocus||"undefined"!==typeof this.$el&&this.$el.focus(),this.$emit("open",this.id))},deactivate(){this.isOpen&&(this.isOpen=!1,this.searchable?"undefined"!==typeof this.$refs.search&&this.$refs.search.blur():"undefined"!==typeof this.$el&&this.$el.blur(),this.preserveSearch||(this.search=""),this.$emit("close",this.getValue(),this.id))},toggle(){this.isOpen?this.deactivate():this.activate()},adjustPosition(){if("undefined"===typeof window)return;const e=this.$el.getBoundingClientRect().top,t=window.innerHeight-this.$el.getBoundingClientRect().bottom,n=t>this.maxHeight;n||t>e||"below"===this.openDirection||"bottom"===this.openDirection?(this.preferredOpenDirection="below",this.optimizedHeight=Math.min(t-40,this.maxHeight)):(this.preferredOpenDirection="above",this.optimizedHeight=Math.min(e-40,this.maxHeight))}}},ge={data(){return{pointer:0,pointerDirty:!1}},props:{showPointer:{type:Boolean,default:!0},optionHeight:{type:Number,default:40}},computed:{pointerPosition(){return this.pointer*this.optionHeight},visibleElements(){return this.optimizedHeight/this.optionHeight}},watch:{filteredOptions(){this.pointerAdjust()},isOpen(){this.pointerDirty=!1},pointer(){this.$refs.search&&this.$refs.search.setAttribute("aria-activedescendant",this.id+"-"+this.pointer.toString())}},methods:{optionHighlight(e,t){return{"multiselect__option--highlight":e===this.pointer&&this.showPointer,"multiselect__option--selected":this.isSelected(t)}},groupHighlight(e,t){if(!this.groupSelect)return["multiselect__option--disabled",{"multiselect__option--group":t.$isLabel}];const n=this.options.find(e=>e[this.groupLabel]===t.$groupLabel);return n&&!this.wholeGroupDisabled(n)?["multiselect__option--group",{"multiselect__option--highlight":e===this.pointer&&this.showPointer},{"multiselect__option--group-selected":this.wholeGroupSelected(n)}]:"multiselect__option--disabled"},addPointerElement({key:e}="Enter"){this.filteredOptions.length>0&&this.select(this.filteredOptions[this.pointer],e),this.pointerReset()},pointerForward(){this.pointer<this.filteredOptions.length-1&&(this.pointer++,this.$refs.list.scrollTop<=this.pointerPosition-(this.visibleElements-1)*this.optionHeight&&(this.$refs.list.scrollTop=this.pointerPosition-(this.visibleElements-1)*this.optionHeight),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()),this.pointerDirty=!0},pointerBackward(){this.pointer>0?(this.pointer--,this.$refs.list.scrollTop>=this.pointerPosition&&(this.$refs.list.scrollTop=this.pointerPosition),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerBackward()):this.filteredOptions[this.pointer]&&this.filteredOptions[0].$isLabel&&!this.groupSelect&&this.pointerForward(),this.pointerDirty=!0},pointerReset(){this.closeOnSelect&&(this.pointer=0,this.$refs.list&&(this.$refs.list.scrollTop=0))},pointerAdjust(){this.pointer>=this.filteredOptions.length-1&&(this.pointer=this.filteredOptions.length?this.filteredOptions.length-1:0),this.filteredOptions.length>0&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()},pointerSet(e){this.pointer=e,this.pointerDirty=!0}}},ve={name:"vue-multiselect",mixins:[me,ge],compatConfig:{MODE:3,ATTR_ENUMERATED_COERCION:!1},props:{name:{type:String,default:""},modelValue:{type:null,default(){return[]}},selectLabel:{type:String,default:"Press enter to select"},selectGroupLabel:{type:String,default:"Press enter to select group"},selectedLabel:{type:String,default:"Selected"},deselectLabel:{type:String,default:"Press enter to remove"},deselectGroupLabel:{type:String,default:"Press enter to deselect group"},showLabels:{type:Boolean,default:!0},limit:{type:Number,default:99999},maxHeight:{type:Number,default:300},limitText:{type:Function,default:e=>`and ${e} more`},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},openDirection:{type:String,default:""},showNoOptions:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!0},tabindex:{type:Number,default:0}},computed:{hasOptionGroup(){return this.groupValues&&this.groupLabel&&this.groupSelect},isSingleLabelVisible(){return(this.singleValue||0===this.singleValue)&&(!this.isOpen||!this.searchable)&&!this.visibleValues.length},isPlaceholderVisible(){return!this.internalValue.length&&(!this.searchable||!this.isOpen)},visibleValues(){return this.multiple?this.internalValue.slice(0,this.limit):[]},singleValue(){return this.internalValue[0]},deselectLabelText(){return this.showLabels?this.deselectLabel:""},deselectGroupLabelText(){return this.showLabels?this.deselectGroupLabel:""},selectLabelText(){return this.showLabels?this.selectLabel:""},selectGroupLabelText(){return this.showLabels?this.selectGroupLabel:""},selectedLabelText(){return this.showLabels?this.selectedLabel:""},inputStyle(){return this.searchable||this.multiple&&this.modelValue&&this.modelValue.length?this.isOpen?{width:"100%"}:{width:"0",position:"absolute",padding:"0"}:""},contentStyle(){return this.options.length?{display:"inline-block"}:{display:"block"}},isAbove(){return"above"===this.openDirection||"top"===this.openDirection||"below"!==this.openDirection&&"bottom"!==this.openDirection&&"above"===this.preferredOpenDirection},showSearchInput(){return this.searchable&&(!this.hasSingleSelectedSlot||!this.visibleSingleValue&&0!==this.visibleSingleValue||this.isOpen)}}};const Oe={ref:"tags",class:"multiselect__tags"},je={class:"multiselect__tags-wrap"},ye={class:"multiselect__spinner"},xe={key:0},we={class:"multiselect__option"},_e={class:"multiselect__option"},ke=Object(r["j"])("No elements found. Consider changing the search query."),Se={class:"multiselect__option"},$e=Object(r["j"])("List is empty.");function Ve(e,t,n,i,s,a){return Object(r["A"])(),Object(r["f"])("div",{tabindex:e.searchable?-1:n.tabindex,class:[{"multiselect--active":e.isOpen,"multiselect--disabled":n.disabled,"multiselect--above":a.isAbove,"multiselect--has-options-group":a.hasOptionGroup},"multiselect"],onFocus:t[14]||(t[14]=t=>e.activate()),onBlur:t[15]||(t[15]=t=>!e.searchable&&e.deactivate()),onKeydown:[t[16]||(t[16]=Object(r["X"])(Object(r["Y"])(t=>e.pointerForward(),["self","prevent"]),["down"])),t[17]||(t[17]=Object(r["X"])(Object(r["Y"])(t=>e.pointerBackward(),["self","prevent"]),["up"]))],onKeypress:t[18]||(t[18]=Object(r["X"])(Object(r["Y"])(t=>e.addPointerElement(t),["stop","self"]),["enter","tab"])),onKeyup:t[19]||(t[19]=Object(r["X"])(t=>e.deactivate(),["esc"])),role:"combobox","aria-owns":"listbox-"+e.id},[Object(r["I"])(e.$slots,"caret",{toggle:e.toggle},()=>[Object(r["k"])("div",{onMousedown:t[1]||(t[1]=Object(r["Y"])(t=>e.toggle(),["prevent","stop"])),class:"multiselect__select"},null,32)]),Object(r["I"])(e.$slots,"clear",{search:e.search}),Object(r["k"])("div",Oe,[Object(r["I"])(e.$slots,"selection",{search:e.search,remove:e.removeElement,values:a.visibleValues,isOpen:e.isOpen},()=>[Object(r["W"])(Object(r["k"])("div",je,[(Object(r["A"])(!0),Object(r["f"])(r["a"],null,Object(r["H"])(a.visibleValues,(t,n)=>Object(r["I"])(e.$slots,"tag",{option:t,search:e.search,remove:e.removeElement},()=>[(Object(r["A"])(),Object(r["f"])("span",{class:"multiselect__tag",key:n},[Object(r["k"])("span",{textContent:Object(r["M"])(e.getOptionLabel(t))},null,8,["textContent"]),Object(r["k"])("i",{tabindex:"1",onKeypress:Object(r["X"])(Object(r["Y"])(n=>e.removeElement(t),["prevent"]),["enter"]),onMousedown:Object(r["Y"])(n=>e.removeElement(t),["prevent"]),class:"multiselect__tag-icon"},null,40,["onKeypress","onMousedown"])]))])),256))],512),[[r["R"],a.visibleValues.length>0]]),e.internalValue&&e.internalValue.length>n.limit?Object(r["I"])(e.$slots,"limit",{key:0},()=>[Object(r["k"])("strong",{class:"multiselect__strong",textContent:Object(r["M"])(n.limitText(e.internalValue.length-n.limit))},null,8,["textContent"])]):Object(r["g"])("v-if",!0)]),Object(r["k"])(r["c"],{name:"multiselect__loading"},{default:Object(r["V"])(()=>[Object(r["I"])(e.$slots,"loading",{},()=>[Object(r["W"])(Object(r["k"])("div",ye,null,512),[[r["R"],n.loading]])])]),_:3}),e.searchable?(Object(r["A"])(),Object(r["f"])("input",{key:0,ref:"search",name:n.name,id:e.id,type:"text",autocomplete:"off",spellcheck:"false",placeholder:e.placeholder,style:a.inputStyle,value:e.search,disabled:n.disabled,tabindex:n.tabindex,onInput:t[2]||(t[2]=t=>e.updateSearch(t.target.value)),onFocus:t[3]||(t[3]=Object(r["Y"])(t=>e.activate(),["prevent"])),onBlur:t[4]||(t[4]=Object(r["Y"])(t=>e.deactivate(),["prevent"])),onKeyup:t[5]||(t[5]=Object(r["X"])(t=>e.deactivate(),["esc"])),onKeydown:[t[6]||(t[6]=Object(r["X"])(Object(r["Y"])(t=>e.pointerForward(),["prevent"]),["down"])),t[7]||(t[7]=Object(r["X"])(Object(r["Y"])(t=>e.pointerBackward(),["prevent"]),["up"])),t[9]||(t[9]=Object(r["X"])(Object(r["Y"])(t=>e.removeLastElement(),["stop"]),["delete"]))],onKeypress:t[8]||(t[8]=Object(r["X"])(Object(r["Y"])(t=>e.addPointerElement(t),["prevent","stop","self"]),["enter"])),class:"multiselect__input","aria-controls":"listbox-"+e.id},null,44,["name","id","placeholder","value","disabled","tabindex","aria-controls"])):Object(r["g"])("v-if",!0),a.isSingleLabelVisible?(Object(r["A"])(),Object(r["f"])("span",{key:1,class:"multiselect__single",onMousedown:t[10]||(t[10]=Object(r["Y"])((...t)=>e.toggle&&e.toggle(...t),["prevent"]))},[Object(r["I"])(e.$slots,"singleLabel",{option:a.singleValue},()=>[Object(r["j"])(Object(r["M"])(e.currentOptionLabel),1)])],32)):Object(r["g"])("v-if",!0),a.isPlaceholderVisible?(Object(r["A"])(),Object(r["f"])("span",{key:2,class:"multiselect__placeholder",onMousedown:t[11]||(t[11]=Object(r["Y"])((...t)=>e.toggle&&e.toggle(...t),["prevent"]))},[Object(r["I"])(e.$slots,"placeholder",{},()=>[Object(r["j"])(Object(r["M"])(e.placeholder),1)])],32)):Object(r["g"])("v-if",!0)],512),Object(r["k"])(r["c"],{name:"multiselect"},{default:Object(r["V"])(()=>[Object(r["W"])(Object(r["k"])("div",{class:"multiselect__content-wrapper",onFocus:t[12]||(t[12]=(...t)=>e.activate&&e.activate(...t)),tabindex:"-1",onMousedown:t[13]||(t[13]=Object(r["Y"])(()=>{},["prevent"])),style:{maxHeight:e.optimizedHeight+"px"},ref:"list"},[Object(r["k"])("ul",{class:"multiselect__content",style:a.contentStyle,role:"listbox",id:"listbox-"+e.id},[Object(r["I"])(e.$slots,"beforeList"),e.multiple&&e.max===e.internalValue.length?(Object(r["A"])(),Object(r["f"])("li",xe,[Object(r["k"])("span",we,[Object(r["I"])(e.$slots,"maxElements",{},()=>[Object(r["j"])("Maximum of "+Object(r["M"])(e.max)+" options selected. First remove a selected option to select another.",1)])])])):Object(r["g"])("v-if",!0),!e.max||e.internalValue.length<e.max?(Object(r["A"])(!0),Object(r["f"])(r["a"],{key:1},Object(r["H"])(e.filteredOptions,(t,n)=>(Object(r["A"])(),Object(r["f"])("li",{class:"multiselect__element",key:n,id:e.id+"-"+n,role:t&&(t.$isLabel||t.$isDisabled)?null:"option"},[t&&(t.$isLabel||t.$isDisabled)?Object(r["g"])("v-if",!0):(Object(r["A"])(),Object(r["f"])("span",{key:0,class:[e.optionHighlight(n,t),"multiselect__option"],onClick:Object(r["Y"])(n=>e.select(t),["stop"]),onMouseenter:Object(r["Y"])(t=>e.pointerSet(n),["self"]),"data-select":t&&t.isTag?e.tagPlaceholder:a.selectLabelText,"data-selected":a.selectedLabelText,"data-deselect":a.deselectLabelText},[Object(r["I"])(e.$slots,"option",{option:t,search:e.search,index:n},()=>[Object(r["k"])("span",null,Object(r["M"])(e.getOptionLabel(t)),1)])],42,["onClick","onMouseenter","data-select","data-selected","data-deselect"])),t&&(t.$isLabel||t.$isDisabled)?(Object(r["A"])(),Object(r["f"])("span",{key:1,"data-select":e.groupSelect&&a.selectGroupLabelText,"data-deselect":e.groupSelect&&a.deselectGroupLabelText,class:[e.groupHighlight(n,t),"multiselect__option"],onMouseenter:Object(r["Y"])(t=>e.groupSelect&&e.pointerSet(n),["self"]),onMousedown:Object(r["Y"])(n=>e.selectGroup(t),["prevent"])},[Object(r["I"])(e.$slots,"option",{option:t,search:e.search,index:n},()=>[Object(r["k"])("span",null,Object(r["M"])(e.getOptionLabel(t)),1)])],42,["data-select","data-deselect","onMouseenter","onMousedown"])):Object(r["g"])("v-if",!0)],8,["id","role"]))),128)):Object(r["g"])("v-if",!0),Object(r["W"])(Object(r["k"])("li",null,[Object(r["k"])("span",_e,[Object(r["I"])(e.$slots,"noResult",{search:e.search},()=>[ke])])],512),[[r["R"],n.showNoResults&&0===e.filteredOptions.length&&e.search&&!n.loading]]),Object(r["W"])(Object(r["k"])("li",null,[Object(r["k"])("span",Se,[Object(r["I"])(e.$slots,"noOptions",{},()=>[$e])])],512),[[r["R"],n.showNoOptions&&(0===e.options.length||!0===a.hasOptionGroup&&0===e.filteredOptions.length)&&!e.search&&!n.loading]]),Object(r["I"])(e.$slots,"afterList")],12,["id"])],36),[[r["R"],e.isOpen]])]),_:3})],42,["tabindex","aria-owns"])}ve.render=Ve;var Ae=ve,Le={name:"CompositionItem",components:{VeeForm:oe["c"],VeeField:oe["b"],VueMultiselect:Ae},props:{song:{type:Object,required:!0},updateSong:{type:Function,required:!0},index:{type:Number,required:!0},removeSong:{type:Function,required:!0},updateUnsavedFlag:{type:Function}},data:function(){return{showForm:!1,isTagLimitExceeded:!1,value:[],tags:[],coverUrl:"",coverPreview:null,coverFile:null,successTimeout:null,schema:{modified_name:"required",genre:"alpha_spaces"},in_submission:!1,show_alert:!1,alert_variant:"bg-blue-500",alert_message:this.$t("alert.update")}},created:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,T["c"].collection("tags").get();case 2:return n=t.sent,n.forEach((function(t){e.tags.push({name:t.id})})),t.next=6,T["c"].collection("songs").doc(e.song.docID).get();case 6:r=t.sent,i=r.data(),i.genre&&(e.value=i.genre.map((function(e){return{name:e}})));case 9:case"end":return t.stop()}}),t)})))()},methods:{onSelect:function(e){this.value.length>4?(this.isTagLimitExceeded=!0,this.value=this.value.filter((function(t){return t.name!==e.name}))):this.isTagLimitExceeded=!1},onCoverChange:function(e){var t=this;if(this.coverFile=e.target.files[0],this.coverFile){var n=new FileReader;n.onload=function(e){t.coverPreview=e.target.result},n.readAsDataURL(this.coverFile)}else this.coverPreview=null},addTag:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r={name:e},n.next=3,T["c"].collection("tags").doc(e).set(r);case 3:t.tags.push(r),t.value.push(r);case 5:case"end":return n.stop()}}),n)})))()},edit:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.in_submission=!0,t.show_alert=!0,t.alert_variant="bg-blue-500",t.alert_message=t.$t("alert.update"),n.prev=4,n.next=7,t.uploadCover();case 7:return r=n.sent,r&&(e.cover=r.url),n.next=11,T["e"].doc(t.song.docID).update(e);case 11:n.next=19;break;case 13:return n.prev=13,n.t0=n["catch"](4),t.in_submission=!1,t.alert_variant="bg-red-500",t.alert_message=t.$t("alert.wrong"),n.abrupt("return");case 19:return t.updateSong(t.index,e),t.updateUnsavedFlag(!1),n.next=23,t.saveTags();case 23:t.in_submission=!1,t.alert_variant="bg-green-500",t.alert_message=t.$t("alert.success"),clearTimeout(t.successTimeout),t.successTimeout=setTimeout((function(){t.show_alert=!1}),3e3);case 28:case"end":return n.stop()}}),n,null,[[4,13]])})))()},saveTags:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,T["c"].collection("songs").doc(e.song.docID).update({genre:e.value.map((function(e){return e.name}))});case 2:e.updateSong(e.index,e.song);case 3:case"end":return t.stop()}}),t)})))()},deleteSong:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=T["f"].ref(),r=n.child("songs/".concat(e.song.original_name)),i=n.child("covers/".concat(e.song.cover)),t.next=5,r["delete"]();case 5:if(!e.song.cover){t.next=8;break}return t.next=8,i["delete"]();case 8:return t.next=10,T["e"].doc(e.song.docID)["delete"]();case 10:e.removeSong(e.index);case 11:case"end":return t.stop()}}),t)})))()},handleFileChange:function(e){var t=this;this.coverFile=e.target.files[0];var n=new FileReader;n.onload=function(e){t.coverUrl=e.target.result},n.readAsDataURL(this.coverFile)},uploadCover:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,r,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.coverFile){t.next=2;break}return t.abrupt("return");case 2:return n=T["f"].ref(),r=n.child("covers/".concat(e.coverFile.name)),i=r.put(e.coverFile),t.prev=5,t.next=8,new Promise((function(e,t){i.on("state_changed",null,t,e)}));case 8:return t.next=10,i.snapshot.ref.getDownloadURL();case 10:return s=t.sent,e.coverUrl=s,t.abrupt("return",{url:s});case 15:return t.prev=15,t.t0=t["catch"](5),console.error(t.t0),t.abrupt("return");case 19:case"end":return t.stop()}}),t,null,[[5,15]])})))()}}};n("d76c");const Me=U()(Le,[["render",ae]]);var Re=Me,Ee={name:"manage",components:{AppUpload:B,CompositionItem:Re},data:function(){return{songs:[],likedSongs:[],unsavedFlag:!1,unsubscribeAuth:null,NameUser:""}},created:function(){var e=this;this.unsubscribeAuth=T["a"].onAuthStateChanged((function(t){t?(e.NameUser=t.displayName,e.fetchUserSongs(),e.fetchLikedSongs()):e.$router.push({name:"home"})}))},beforeUnmount:function(){this.unsubscribeAuth&&this.unsubscribeAuth()},methods:{fetchUserSongs:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=T["a"].currentUser.uid,t.next=3,T["e"].where("uid","==",n).get();case 3:r=t.sent,e.songs=[],r.forEach((function(t){var n=Object(h["a"])(Object(h["a"])({},t.data()),{},{docID:t.id});e.songs.push(n)}));case 6:case"end":return t.stop()}}),t)})))()},fetchLikedSongs:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,r,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=T["a"].currentUser.uid,t.next=3,T["d"].where("userId","==",n).get();case 3:return r=t.sent,i=r.docs.map((function(e){var t=e.data();return T["e"].doc(t.songId).get()})),t.next=7,Promise.all(i);case 7:s=t.sent,s.forEach((function(t){var n=t.data();e.likedSongs.push(Object(h["a"])(Object(h["a"])({},n),{},{docID:t.id}))}));case 9:case"end":return t.stop()}}),t)})))()},updateSong:function(e,t){this.songs[e].modified_name=t.modified_name,this.songs[e].genre=t.genre},deleteLikes:function(e){return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,T["d"].where("songId","==",e).get();case 2:return n=t.sent,r=T["d"].firestore.batch(),n.docs.forEach((function(e){r["delete"](e.ref)})),t.next=7,r.commit();case 7:case"end":return t.stop()}}),t)})))()},removeSong:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.songs[e].docID,n.next=3,t.deleteLikes(r);case 3:return n.next=5,T["e"].doc(r)["delete"]();case 5:t.songs.splice(e,1);case 6:case"end":return n.stop()}}),n)})))()},addSong:function(e){var t=Object(h["a"])(Object(h["a"])({},e.data()),{},{docID:e.id});this.songs.push(t)},updateUnsavedFlag:function(e){this.unsavedFlag=e}},beforeRouteLeave:function(e,t,n){if(this.unsavedFlag){var r=confirm("You have unsaved changes. Are you sure you want to leave?");n(r)}else n()}};const Ie=U()(Ee,[["render",p]]);t["default"]=Ie},fb6a:function(e,t,n){"use strict";var r=n("23e7"),i=n("da84"),s=n("e8b5"),a=n("68ee"),o=n("861d"),l=n("23cb"),c=n("07fa"),u=n("fc6a"),d=n("8418"),b=n("b622"),p=n("1dde"),h=n("f36a"),f=p("slice"),m=b("species"),g=i.Array,v=Math.max;r({target:"Array",proto:!0,forced:!f},{slice:function(e,t){var n,r,i,b=u(this),p=c(b),f=l(e,p),O=l(void 0===t?p:t,p);if(s(b)&&(n=b.constructor,a(n)&&(n===g||s(n.prototype))?n=void 0:o(n)&&(n=n[m],null===n&&(n=void 0)),n===g||void 0===n))return h(b,f,O);for(r=new(void 0===n?g:n)(v(O-f,0)),i=0;f<O;f++,i++)f in b&&d(r,i,b[f]);return r.length=i,r}})}}]);
//# sourceMappingURL=groupedChunk.4f774812.js.map