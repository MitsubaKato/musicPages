(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a3ed3a8"],{"13ec":function(e,t,r){},"1ec3":function(e,t,r){"use strict";r("13ec")},c66d:function(e,t,r){"use strict";r.r(t);var n=r("7a23"),c=function(e){return Object(n["D"])("data-v-be39feb6"),e=e(),Object(n["B"])(),e},s={class:"profile-page"},a={class:"relative block h-500-px"},i=c((function(){return Object(n["i"])("span",{id:"blackOverlay",class:"w-full h-full absolute opacity-50 bg-black"},null,-1)})),l=c((function(){return Object(n["i"])("div",{class:"top-auto bottom-0 left-0 right-0 w-full absolute pointer-events-none overflow-hidden h-70-px",style:{transform:"translateZ(0px)"}},[Object(n["i"])("svg",{class:"absolute bottom-0 overflow-hidden",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 2560 100",x:"0",y:"0"},[Object(n["i"])("polygon",{class:"text-blueGray-200 fill-current",points:"2560 0 2560 100 0 100"})])],-1)})),o={class:"relative py-16 bg-blueGray-200"},u={class:"container mx-auto px-4"},d={class:"relative flex flex-col min-w-0 break-words bg-white w-full mb-6 shadow-xl rounded-lg -mt-64"},b={class:"px-6"},p={class:"flex flex-wrap justify-center"},f={class:"w-full lg:w-3/12 px-4 lg:order-2 flex justify-center"},g=["src"],h=c((function(){return Object(n["i"])("div",{class:"w-full lg:w-4/12 px-4 lg:order-3 lg:text-right lg:self-center"},null,-1)})),m={class:"w-full lg:w-4/12 px-4 lg:order-1"},j={class:"flex justify-center py-4 lg:pt-4 pt-8"},O={class:"mr-4 p-3 text-center"},x={class:"text-xl font-bold block uppercase tracking-wide text-blueGray-600"},v={class:"text-sm text-blueGray-400"},w={class:"mr-4 p-3 text-center"},k={class:"text-xl font-bold block uppercase tracking-wide text-blueGray-600"},y={class:"text-sm text-blueGray-400"},U={class:"lg:mr-4 p-3 text-center"},R={class:"text-xl font-bold block uppercase tracking-wide text-blueGray-600"},L={class:"text-sm text-blueGray-400"},B={class:"text-center mt-12"},F={class:"text-4xl font-semibold leading-normal mb-2 text-blueGray-700 mb-2"},P=c((function(){return Object(n["i"])("div",{class:"mt-10 py-10 border-t border-blueGray-200 text-center"},null,-1)})),G={class:"text-center"},M={class:"text-xl font-semibold mb-4"},A=c((function(){return Object(n["i"])("i",{class:"fa fa-heart pl-2 text-red-500"},null,-1)})),I={class:"flex flex-col p-4"},S={class:"select-none cursor-pointer bg-gradient-to-l from-teal-200 via-sky-400 to-emerald-400 rounded-md flex flex-1 items-center p-4 transition duration-500 ease-in-out transform hover:-translate-y-1 hover:shadow-lg"},C=["src"],$={class:"flex-1 pl-1 mr-16"},D={class:"pt-2 block"},N={class:"inline-block bg-bgName rounded-full px-3 py-1 text-sm font-semibold text-white cursor-pointer"};function _(e,t,r,c,_,J){var H=Object(n["J"])("router-link");return Object(n["A"])(),Object(n["h"])("main",s,[Object(n["i"])("section",a,[Object(n["i"])("div",{onClick:t[1]||(t[1]=function(){return J.triggerBgUpload&&J.triggerBgUpload.apply(J,arguments)}),class:"absolute top-0 w-full h-full bg-center bg-cover",style:Object(n["u"])("background-image: url('".concat(_.user.backgroundURL||"../assets/img/user-header.png","');"))},[Object(n["i"])("input",{type:"file",ref:"bgInput",onChange:t[0]||(t[0]=function(){return J.handleBgUpload&&J.handleBgUpload.apply(J,arguments)}),style:{display:"none"}},null,544),i],4),l]),Object(n["i"])("section",o,[Object(n["i"])("div",u,[Object(n["i"])("div",d,[Object(n["i"])("div",b,[Object(n["i"])("div",p,[Object(n["i"])("div",f,[Object(n["i"])("input",{type:"file",ref:"fileInput",onChange:t[2]||(t[2]=function(){return J.handleFileUpload&&J.handleFileUpload.apply(J,arguments)}),style:{display:"none"}},null,544),Object(n["i"])("img",{alt:"...",src:_.user.photoURL||"https://via.placeholder.com/150",onClick:t[3]||(t[3]=function(){return J.triggerFileUpload&&J.triggerFileUpload.apply(J,arguments)}),class:"w-40 h-40 rounded-full border-4 border-green-400 object-cover -m-20 opacity-100 transition duration-300 ease-in-out hover:opacity-90"},null,8,g)]),h,Object(n["i"])("div",m,[Object(n["i"])("div",j,[Object(n["i"])("div",O,[Object(n["i"])("span",x,Object(n["M"])(_.userLikes),1),Object(n["i"])("span",v,Object(n["M"])(e.$t("profile.like")),1)]),Object(n["i"])("div",w,[Object(n["i"])("span",k,Object(n["M"])(_.userUploads),1),Object(n["i"])("span",y,Object(n["M"])(e.$t("profile.uploads")),1)]),Object(n["i"])("div",U,[Object(n["i"])("span",R,Object(n["M"])(_.userComments),1),Object(n["i"])("span",L,Object(n["M"])(e.$t("profile.comments")),1)])])])]),Object(n["i"])("div",B,[Object(n["i"])("h3",F,Object(n["M"])(_.NameUser),1)]),P,Object(n["i"])("div",G,[Object(n["i"])("h3",M,[Object(n["j"])(Object(n["M"])(e.$t("profile.likes"))+" ",1),A])]),Object(n["i"])("ul",I,[(Object(n["A"])(!0),Object(n["h"])(n["a"],null,Object(n["H"])(_.likedSongs,(function(e,t){return Object(n["A"])(),Object(n["h"])("li",{key:t,class:"flex flex-row mb-2"},[Object(n["k"])(H,{to:{name:"song",params:{id:e.docID}},class:"block w-full"},{default:Object(n["V"])((function(){return[Object(n["i"])("div",S,[Object(n["i"])("img",{src:e.cover||"https://via.placeholder.com/150",class:"rounded-md w-10 h-full justify-center items-center mr-4"},null,8,C),Object(n["i"])("div",$,[Object(n["i"])("div",null,Object(n["M"])(e.modified_name),1),Object(n["i"])("div",D,[(Object(n["A"])(!0),Object(n["h"])(n["a"],null,Object(n["H"])(e.genre,(function(e){return Object(n["A"])(),Object(n["h"])("span",{key:e,class:"mr-2 inline-block rounded-full bg-bgGenre px-3 py-1 text-sm font-semibold text-white"},Object(n["M"])(e),1)})),128))])]),Object(n["i"])("span",N,Object(n["M"])(e.display_name),1)])]})),_:2},1032,["to"])])})),128))])])])])])])}var J=r("5530"),H=r("1da1"),E=(r("d81d"),r("d3b7"),r("3ca3"),r("ddb0"),r("4160"),r("159b"),r("99af"),r("b0c0"),r("96cf"),r("b79f")),V={data:function(){return{user:{},songs:[],likedSongs:[],unsubscribeAuth:null,NameUser:"",selectedFile:null,userLikes:0,userComments:0,userUploads:0}},beforeUnmount:function(){this.unsubscribeProfileListener&&this.unsubscribeProfileListener()},created:function(){var e=this;this.unsubscribeAuth=E["a"].onAuthStateChanged((function(t){t?(e.NameUser=t.displayName,e.fetchUserProfile(),e.fetchLikedSongs(),e.fetchUserStats()):e.$router.push({name:"home"})}))},methods:{fetchUserStats:function(){var e=this;return Object(H["a"])(regeneratorRuntime.mark((function t(){var r,n,c,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=E["a"].currentUser.uid,t.next=3,E["d"].where("userId","==",r).get();case 3:return n=t.sent,e.userLikes=n.docs.length,t.next=7,E["b"].where("uid","==",r).get();case 7:return c=t.sent,e.userComments=c.docs.length,t.next=11,E["e"].where("uid","==",r).get();case 11:s=t.sent,e.userUploads=s.docs.length;case 13:case"end":return t.stop()}}),t)})))()},fetchLikedSongs:function(){var e=this;return Object(H["a"])(regeneratorRuntime.mark((function t(){var r,n,c,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=E["a"].currentUser.uid,t.next=3,E["d"].where("userId","==",r).get();case 3:return n=t.sent,c=n.docs.map((function(e){var t=e.data();return E["e"].doc(t.songId).get()})),t.next=7,Promise.all(c);case 7:s=t.sent,s.forEach((function(t){if(t.exists){var r=t.data();e.likedSongs.push(Object(J["a"])(Object(J["a"])({},r),{},{docID:t.id}))}}));case 9:case"end":return t.stop()}}),t)})))()},triggerBgUpload:function(){this.$refs.bgInput.click()},handleBgUpload:function(e){this.selectedBgFile=e.target.files[0],this.uploadBackgroundPicture()},uploadBackgroundPicture:function(){var e=this;return Object(H["a"])(regeneratorRuntime.mark((function t(){var r,n,c,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=E["a"].currentUser.uid,n=E["f"].ref(),c=n.child("users/".concat(r,"/background-picture/").concat(e.selectedBgFile.name)),t.next=5,c.put(e.selectedBgFile);case 5:return t.next=7,c.getDownloadURL();case 7:return s=t.sent,t.next=10,E["g"].doc(r).update({backgroundURL:s});case 10:e.user.backgroundURL=s;case 11:case"end":return t.stop()}}),t)})))()},triggerFileUpload:function(){this.$refs.fileInput.click()},handleFileUpload:function(e){this.selectedFile=e.target.files[0],this.uploadProfilePicture()},uploadProfilePicture:function(){var e=this;return Object(H["a"])(regeneratorRuntime.mark((function t(){var r,n,c,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=E["a"].currentUser.uid,n=E["f"].ref(),c=n.child("users/".concat(r,"/profile-picture/").concat(e.selectedFile.name)),t.next=5,c.put(e.selectedFile);case 5:return t.next=7,c.getDownloadURL();case 7:return s=t.sent,t.next=10,E["g"].doc(r).update({photoURL:s});case 10:e.user.photoURL=s;case 11:case"end":return t.stop()}}),t)})))()},fetchUserProfile:function(){var e=this;return Object(H["a"])(regeneratorRuntime.mark((function t(){var r,n,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=E["a"].currentUser.uid,t.next=3,E["g"].doc(r).get();case 3:n=t.sent,c=n.data(),e.user=Object(J["a"])(Object(J["a"])({},c),{},{uid:r}),e.unsubscribeProfileListener=E["g"].doc(r).onSnapshot((function(t){var r=t.data();e.user.photoURL=r.photoURL}));case 7:case"end":return t.stop()}}),t)})))()}}},Z=(r("1ec3"),r("6b0d")),q=r.n(Z);const z=q()(V,[["render",_],["__scopeId","data-v-be39feb6"]]);t["default"]=z},d81d:function(e,t,r){"use strict";var n=r("23e7"),c=r("b727").map,s=r("1dde"),a=s("map");n({target:"Array",proto:!0,forced:!a},{map:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-2a3ed3a8.aeffa161.js.map