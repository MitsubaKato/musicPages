(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69af673b"],{bb51:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),a={class:"mb-8 py-20 text-white text-center relative"},c=Object(r["i"])("div",{class:"absolute inset-0 w-full h-full bg-contain introduction-bg",style:{"background-image":"url(assets/img/header.png)"}},null,-1),i={class:"container mx-auto"},s={class:"text-white main-header-content"},o={class:"font-bold text-5xl mb-5"},u=Object(r["i"])("p",{class:"w-full md:w-8/12 mx-auto"}," Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus et dolor mollis, congue augue non, venenatis elit. Nunc justo eros, suscipit ac aliquet imperdiet, venenatis et sapien. Duis sed magna pulvinar, fringilla lorem eget, ullamcorper urna. ",-1),l=Object(r["i"])("img",{class:"relative block mx-auto mt-5 -mb-20 w-auto max-w-full",src:"assets/img/introduction-music.png"},null,-1),d={class:"container mx-auto"},b={class:"bg-gray-900 rounded border-gray-200 relative flex flex-col"},m={id:"playlist"};function g(e,t,n,g,h,f){var p=Object(r["J"])("app-song-item");return Object(r["A"])(),Object(r["h"])("main",null,[Object(r["i"])("section",a,[c,Object(r["i"])("div",i,[Object(r["i"])("div",s,[Object(r["i"])("h1",o,Object(r["M"])(e.$t("home.listen")),1),u])]),l]),Object(r["i"])("section",d,[Object(r["i"])("div",b,[Object(r["i"])("div",m,[(Object(r["A"])(!0),Object(r["h"])(r["a"],null,Object(r["H"])(h.songs,(function(e){return Object(r["A"])(),Object(r["f"])(p,{key:e.docID,song:e,onShowAuthModal:f.showAuthModal},null,8,["song","onShowAuthModal"])})),128))])])])])}var h=n("5530"),f=n("1da1"),p=(n("4160"),n("d3b7"),n("159b"),n("96cf"),n("b79f")),j=function(e){return Object(r["D"])("data-v-25612b20"),e=e(),Object(r["B"])(),e},O=["id"],k=["src"],x={class:"flex-grow pl-4"},w={class:"pt-2 block"},v={class:"inline-block rounded-l-lg bg-bgUploadBy px-3 py-1 text-sm font-semibold text-white"},y={class:"inline-block bg-bgName rounded-r-lg px-3 py-1 text-sm font-semibold text-white cursor-pointer"},A={class:"flex items-center ml-5"},R={class:"ml-3 text-white"},I=j((function(){return Object(r["i"])("i",{class:"fa fa-comments text-white"},null,-1)}));function M(e,t,n,a,c,i){var s=Object(r["J"])("router-link");return Object(r["A"])(),Object(r["h"])("div",{class:"select-none cursor-pointer bg-gradient-to-r from-gray-800 to-gray-700 rounded-md flex flex-1 items-center p-4 mb-3 transition duration-500 ease-in-out transform hover:-translate-y-1 hover:shadow-lg",id:"song-id-".concat(n.song.docID)},[Object(r["i"])("div",null,[Object(r["i"])("img",{src:n.song.cover||"https://via.placeholder.com/150",class:"w-20 h-full rounded-md",alt:""},null,8,k)]),Object(r["i"])("div",x,[Object(r["k"])(s,{to:{name:"song",params:{id:n.song.docID}},class:"font-bold block text-white"},{default:Object(r["V"])((function(){return[Object(r["j"])(Object(r["M"])(n.song.modified_name),1)]})),_:1},8,["to"]),Object(r["i"])("div",w,[(Object(r["A"])(!0),Object(r["h"])(r["a"],null,Object(r["H"])(n.song.genre,(function(e){return Object(r["A"])(),Object(r["h"])("span",{key:e,class:"mr-2 inline-block rounded-full bg-bgGenre px-3 py-1 text-sm font-semibold text-white"},Object(r["M"])(e),1)})),128))]),Object(r["i"])("span",{class:"song-owner block pt-2",onClick:t[0]||(t[0]=function(){return i.checkAuth&&i.checkAuth.apply(i,arguments)})},[Object(r["i"])("span",v,Object(r["M"])(e.$t("fieldNames.uploadedBy")),1),Object(r["i"])("span",y,Object(r["M"])(n.song.display_name),1)])]),Object(r["i"])("div",A,[Object(r["i"])("span",R,[I,Object(r["j"])(" "+Object(r["M"])(n.song.comment_count),1)]),Object(r["i"])("button",{onClick:t[1]||(t[1]=function(){return i.addLike&&i.addLike.apply(i,arguments)}),class:Object(r["t"])(["no-outline",{heart:c.liked,heartBeat:c.liked}])},[Object(r["i"])("i",{class:Object(r["t"])(["fa fa-heart ml-4",{"text-red-700":c.liked,"text-gray-500":!c.liked}])},null,2)],2)])],8,O)}var S={name:"SongItem",props:["song"],data:function(){return{liked:!1}},created:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.checkUserLike();case 2:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;p["a"].onAuthStateChanged(function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=4;break}e.liked=!1,t.next=6;break;case 4:return t.next=6,e.checkUserLike();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},methods:{checkAuth:function(){p["a"].currentUser?this.$router.push({name:"UserProfile",params:{id:this.song.uid}}):this.$emit("showAuthModal")},checkUserLike:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=p["a"].currentUser,!n){t.next=8;break}return t.next=4,p["d"].where("songId","==",e.song.docID).where("userId","==",n.uid).get();case 4:r=t.sent,r.size>0?e.liked=!0:e.liked=!1,t.next=9;break;case 8:e.liked=!1;case 9:case"end":return t.stop()}}),t)})))()},addLike:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=p["a"].currentUser,n){t.next=4;break}return alert("Please sign in to like songs."),t.abrupt("return");case 4:if(!e.liked){t.next=11;break}return t.next=7,p["d"].where("songId","==",e.song.docID).where("userId","==",n.uid).get();case 7:r=t.sent,r.forEach(function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.ref["delete"]();case 2:e.liked=!1;case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=15;break;case 11:return a={songId:e.song.docID,userId:n.uid,userName:n.displayName,songName:e.song.modified_name},t.next=14,p["d"].add(a);case 14:e.liked=!0;case 15:case"end":return t.stop()}}),t)})))()}}},D=(n("e51f"),n("6b0d")),L=n.n(D);const P=L()(S,[["render",M],["__scopeId","data-v-25612b20"]]);var U=P,_={name:"Home",components:{AppSongItem:U},data:function(){return{songs:[],maxPerPage:6,pendingRequest:!1}},created:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getSongs(),window.addEventListener("scroll",e.handleScroll);case 2:case"end":return t.stop()}}),t)})))()},beforeUnmount:function(){window.removeEventListener("scroll",this.handleScroll)},methods:{showAuthModal:function(){this.$store.commit("toggleAuthModal")},handleScroll:function(){var e=document.documentElement,t=e.scrollHeight,n=e.scrollTop,r=e.clientHeight,a=Math.round(n+r)>=t;a&&this.getSongs()},getSongs:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.pendingRequest){t.next=2;break}return t.abrupt("return");case 2:if(e.pendingRequest=!0,!e.songs.length){t.next=12;break}return t.next=6,p["e"].doc(e.songs[e.songs.length-1].docID).get();case 6:return r=t.sent,t.next=9,p["e"].orderBy("uploadTimestamp").startAfter(r).limit(e.maxPerPage).get();case 9:n=t.sent,t.next=15;break;case 12:return t.next=14,p["e"].orderBy("uploadTimestamp").limit(e.maxPerPage).get();case 14:n=t.sent;case 15:n.forEach((function(t){e.songs.push(Object(h["a"])({docID:t.id},t.data()))})),e.pendingRequest=!1;case 17:case"end":return t.stop()}}),t)})))()}}};const B=L()(_,[["render",g]]);t["default"]=B},e51f:function(e,t,n){"use strict";n("f24c")},f24c:function(e,t,n){}}]);
//# sourceMappingURL=chunk-69af673b.efbdbef9.js.map